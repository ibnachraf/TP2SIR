/*C1*/SET SCHEMA SYSTEM_LOBS
INSERT INTO BLOCKS VALUES(0,2147483647,0)
COMMIT
/*C3*/SET SCHEMA PUBLIC
create table Chauffage (id bigint generated by default as identity (start with 1), conso float not null, residence_id bigint, primary key (id))
create table ElectronicDevices (id bigint generated by default as identity (start with 1), consommation integer not null, proprio_id bigint, primary key (id))
create table Person (id bigint generated by default as identity (start with 1), mail varchar(255), nom varchar(255), prenom varchar(255), primary key (id))
create table Person_Person (Person_id bigint not null, ami_id bigint not null)
create table Residence (id bigint generated by default as identity (start with 1), nbPieces integer not null, taille integer not null, proprio_id bigint, primary key (id))
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
alter table Chauffage add constraint FK_2ot81yp1amflqvv5noao5klmx foreign key (residence_id) references Residence
alter table ElectronicDevices add constraint FK_ijpnjawyh701oqivlaotsgvta foreign key (proprio_id) references Person
alter table Person_Person add constraint FK_ejm7ti25m10o49jp179dtyhfn foreign key (ami_id) references Person
alter table Person_Person add constraint FK_inq4xm3i524cmia3rp65fx39w foreign key (Person_id) references Person
alter table Residence add constraint FK_mavb2c4yw4awab0tux0927axb foreign key (proprio_id) references Person
INSERT INTO PERSON VALUES(1,'jj@f.l','martin2','per')
INSERT INTO RESIDENCE VALUES(1,4,3,1)
INSERT INTO CHAUFFAGE VALUES(1,0.0E0,1)
INSERT INTO CHAUFFAGE VALUES(2,0.0E0,1)
INSERT INTO ELECTRONICDEVICES VALUES(1,2,1)
INSERT INTO ELECTRONICDEVICES VALUES(2,3,1)
COMMIT
DISCONNECT
/*C4*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
INSERT INTO PERSON VALUES(2,'ibnachraf@gm.com','Ibn Mrabet','Achraf')
INSERT INTO RESIDENCE VALUES(2,10,200,2)
INSERT INTO CHAUFFAGE VALUES(3,0.0E0,2)
INSERT INTO CHAUFFAGE VALUES(4,0.0E0,2)
INSERT INTO ELECTRONICDEVICES VALUES(3,2,2)
INSERT INTO ELECTRONICDEVICES VALUES(4,3,2)
COMMIT
DISCONNECT
/*C5*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
DISCONNECT
/*C6*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
DISCONNECT
/*C7*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
DISCONNECT
/*C8*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
DISCONNECT
/*C9*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
/*C10*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
/*C11*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
/*C12*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
/*C13*/SET SCHEMA PUBLIC
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
DISCONNECT
/*C2*/SET SCHEMA PUBLIC
drop table chauffage cascade
drop table residence cascade
drop table person cascade
/*C14*/SET SCHEMA PUBLIC
create table Chauffage (id bigint generated by default as identity (start with 1), conso float not null, residence_id bigint, primary key (id))
create table Person (id bigint generated by default as identity (start with 1), mail varchar(255), nom varchar(255), prenom varchar(255), primary key (id))
create table Residence (id bigint generated by default as identity (start with 1), nbPieces integer not null, taille integer not null, proprio_id bigint, primary key (id))
alter table Person_Person drop constraint UK_ejm7ti25m10o49jp179dtyhfn
alter table Person_Person add constraint UK_ejm7ti25m10o49jp179dtyhfn  unique (ami_id)
alter table Chauffage add constraint FK_2ot81yp1amflqvv5noao5klmx foreign key (residence_id) references Residence
alter table Residence add constraint FK_mavb2c4yw4awab0tux0927axb foreign key (proprio_id) references Person
INSERT INTO PERSON VALUES(1,'jj@f.l','martin2','per')
INSERT INTO RESIDENCE VALUES(1,4,3,1)
INSERT INTO CHAUFFAGE VALUES(1,0.0E0,1)
INSERT INTO CHAUFFAGE VALUES(2,0.0E0,1)
COMMIT
DISCONNECT
/*C2*/DISCONNECT
